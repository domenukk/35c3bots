import requests

host = "localhost:8075"

print(
    """
First, we need to log in. 
Sadly, mails don't work yet.
Luckily, the code will be returned on /api/login.


    signupresp = requests.post("http://{}/api/signup".format(host), data={"email": "c@cc.cc", "name": "ccc"})
    loginresp = requests.post("http://{}/api/login".format(host), data={"email": "c@cc.cc"})
    code = loginresp.text
    verifyresp = requests.post("http://{}/api/verify".format(host), data={"code": code})
    print(verifyresp.cookies["logged_in"])

The Flag is: 
    """
)


def login() -> requests.Response:
    signupresp = requests.post("http://{}/api/signup".format(host), json={"email": "c@cc.cc", "name": "35c3"})
    loginresp = requests.post("http://{}/api/login".format(host), json={"email": "c@cc.cc"})
    code = loginresp.text
    verifyresp = requests.post("http://{}/api/verify".format(host), json={"code": code})
    return verifyresp


if __name__ == "__main__":
    print(login().cookies["logged_in"])
