#!/usr/bin/env python3
import requests
from _env import HOST

print(
    """
[MISC] Hard
This may be the hardest challenge.
We need to create a string in wee that is not a string for javascript (type confusion)

We can do this by crafting an incomplete function in wee.



Running code is simply a POST request to /wee/run with the code as "code" in json.

We run:

    fun unfinished(): string end
    var res = unfinished()
    alert(assert_string(res))

The Flag is: 
    """
)


def run_wee(code):
    r = requests.post("http://{}/wee/run".format(HOST), json={"code": code})
    return r.json()["result"]


if __name__ == "__main__":
    code = '''
    fun unfinished(): string end
    var res = unfinished()
    alert(assert_string(res))
    '''
    print(run_wee(code))
